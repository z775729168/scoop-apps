{
 "autoupdate": {
  "url": "https://github.com/2dust/v2rayN/releases/download/$version/v2rayN.zip"
 },
 "bin": "v2rayN.exe",
 "checkver": "github",
 "depends": [
  "v2ray",
  "xray"
 ],
 "description": "GUI client based on v2ray core",
 "extract_dir": "v2rayN",
 "hash": "abc5b3c9b9d8a260a22c3226cc707df2c80687d0b8ca89586eb16ab468543717",
 "homepage": "https://github.com/2dust/v2rayN",
 "license": "GPL-3.0-only",
 "persist": [
  "user-wininet.json",
  "config.json"
 ],
 "pre_install": [
  "# 'guiNConfig.json',",
  "if (!(Test-Path \"$persist_dir\\user-wininet.json\")) {",
  "    New-Item -Path \"$dir\\user-wininet.json\" | Out-Null",
  "}",
  "if (Test-Path \"$persist_dir\\guiNConfig.json\") {",
  "    Copy-Item \"$persist_dir\\guiNConfig.json\" \"$dir\\\" | Out-Null",
  "}",
  "if (!(Test-Path \"$persist_dir\\config.json\")) {",
  "    Copy-Item \"$(appdir v2ray $global)\\current\\config.json\" \"$dir\" | Out-Null",
  "}",
  "foreach ($form in @('*.exe', '*.dat', 'vpoint*.json')) {",
  "    foreach ($_ in Get-ChildItem \"$(appdir v2ray $global)\\current\" -File) {",
  "        $name = $_.Name",
  "        if ($name -Like $form) {",
  "            Write-Host \"Creating hardlink for $name\"",
  "            New-Item -ItemType HardLink -Path \"$dir\" -Name $name -Target \"$(appdir v2ray $global)\\current\\$name\" | Out-Null",
  "        }",
  "    }",
  "}",
  "foreach ($form in @('*.exe')) {",
  "    foreach ($_ in Get-ChildItem \"$(appdir xray $global)\\current\" -File) {",
  "        $name = $_.Name",
  "        if ($name -Like $form) {",
  "            Write-Host \"Creating hardlink for $name\"",
  "            New-Item -ItemType HardLink -Path \"$dir\" -Name $name -Target \"$(appdir xray $global)\\current\\$name\" | Out-Null",
  "        }",
  "    }",
  "}"
 ],
 "shortcuts": [
  [
   "v2rayN.exe",
   "v2rayN"
  ]
 ],
 "uninstaller": {
  "script": [
   "if (Test-Path \"$dir\\guiNConfig.json\") {",
   "    Copy-Item \"$dir\\guiNConfig.json\" \"$persist_dir\\\" | Out-Null",
   "}"
  ]
 },
 "url": "https://github.com/2dust/v2rayN/releases/download/5.38/v2rayN.zip",
 "version": "5.38"
}